# ğŸ”§ æ•°æ®æ ¼å¼ä¿®å¤è¯´æ˜

## ğŸ› é—®é¢˜æè¿°

ç”¨æˆ·åœ¨ä½¿ç”¨ç½‘é¡µç«¯æ—¶é‡åˆ°äº†é”™è¯¯ï¼š
```
æå–å¤±è´¥: Cannot read properties of undefined (reading 'url')
```

## ğŸ” é—®é¢˜åˆ†æ

### 1. é”™è¯¯åŸå› 
å‰ç«¯ä»£ç æœŸæœ›çš„æ•°æ®æ ¼å¼ä¸æœåŠ¡å™¨å®é™…è¿”å›çš„æ•°æ®æ ¼å¼ä¸åŒ¹é…ï¼š

**å‰ç«¯æœŸæœ›çš„æ ¼å¼ï¼š**
```javascript
{
  success: true,
  data: {
    url: "...",
    companyName: "...",
    // ... å…¶ä»–å­—æ®µ
  }
}
```

**æœåŠ¡å™¨å®é™…è¿”å›çš„æ ¼å¼ï¼š**
```javascript
{
  success: true,
  results: {
    companyName: "...",
    description: "...",
    // ... å…¶ä»–å­—æ®µ
  },
  url: "...",
  feishuSuccess: true/false
}
```

### 2. å…·ä½“é—®é¢˜
- å‰ç«¯ä»£ç å°è¯•è®¿é—® `data.data.url`ï¼Œä½†æœåŠ¡å™¨è¿”å›çš„æ˜¯ `data.results`
- URLå­—æ®µåœ¨æœåŠ¡å™¨è¿”å›çš„æ ¹çº§åˆ«ï¼Œè€Œä¸æ˜¯åœ¨ `results` å¯¹è±¡ä¸­
- ç¼ºå°‘é£ä¹¦çŠ¶æ€çš„å¤„ç†

## âœ… ä¿®å¤æ–¹æ¡ˆ

### 1. ä¿®å¤å‰ç«¯æ•°æ®å¤„ç†é€»è¾‘

**ä¿®å¤å‰ï¼š**
```javascript
if (data.success) {
    this.displayResults(data.data); // âŒ é”™è¯¯çš„æ•°æ®è·¯å¾„
    this.hideLoading();
}
```

**ä¿®å¤åï¼š**
```javascript
if (data.success) {
    // æ­£ç¡®å¤„ç†æœåŠ¡å™¨è¿”å›çš„æ•°æ®ç»“æ„
    const websiteInfo = data.results;
    websiteInfo.url = data.url; // æ·»åŠ URLåˆ°ç»“æœä¸­
    
    this.displayResults(websiteInfo);
    this.hideLoading();
    
    // æ˜¾ç¤ºé£ä¹¦çŠ¶æ€
    if (data.feishuSuccess) {
        this.showFeishuSuccess();
    } else {
        this.showFeishuError();
    }
}
```

### 2. æ·»åŠ é£ä¹¦çŠ¶æ€å¤„ç†

**æ–°å¢åŠŸèƒ½ï¼š**
```javascript
showFeishuSuccess() {
    const statusDiv = document.getElementById('feishuStatus');
    const successDiv = document.getElementById('feishuSuccess');
    const errorDiv = document.getElementById('feishuError');

    statusDiv.style.display = 'block';
    successDiv.style.display = 'block';
    errorDiv.style.display = 'none';
}

showFeishuError() {
    const statusDiv = document.getElementById('feishuStatus');
    const successDiv = document.getElementById('feishuSuccess');
    const errorDiv = document.getElementById('feishuError');

    statusDiv.style.display = 'block';
    successDiv.style.display = 'none';
    errorDiv.style.display = 'block';
}
```

### 3. ä¼˜åŒ–åŠ è½½çŠ¶æ€ç®¡ç†

**æ”¹è¿›ï¼š**
```javascript
showLoading() {
    document.getElementById('loading').style.display = 'block';
    document.getElementById('results').style.display = 'none';
    document.getElementById('feishuStatus').style.display = 'none'; // éšè—é£ä¹¦çŠ¶æ€
}
```

## ğŸ“Š æ•°æ®æµç¨‹

### ä¿®å¤åçš„å®Œæ•´æ•°æ®æµç¨‹

1. **ç”¨æˆ·è¾“å…¥URL** â†’ å‰ç«¯éªŒè¯
2. **å‘é€APIè¯·æ±‚** â†’ `/api/extract`
3. **æœåŠ¡å™¨å¤„ç†** â†’ æå–ç½‘ç«™ä¿¡æ¯
4. **æœåŠ¡å™¨è¿”å›** â†’ æ ‡å‡†åŒ–çš„æ•°æ®ç»“æ„
5. **å‰ç«¯å¤„ç†** â†’ æ­£ç¡®è§£ææ•°æ®
6. **æ˜¾ç¤ºç»“æœ** â†’ ä¿¡æ¯å±•ç¤º + é£ä¹¦çŠ¶æ€

### æ•°æ®ç»“æ„å¯¹æ¯”

| å­—æ®µ | æœåŠ¡å™¨è¿”å› | å‰ç«¯å¤„ç† | è¯´æ˜ |
|------|------------|----------|------|
| æˆåŠŸæ ‡å¿— | `data.success` | `data.success` | âœ… æ­£ç¡® |
| ç½‘ç«™ä¿¡æ¯ | `data.results` | `data.results` | âœ… ä¿®å¤ |
| ç½‘ç«™URL | `data.url` | `data.url` | âœ… ä¿®å¤ |
| é£ä¹¦çŠ¶æ€ | `data.feishuSuccess` | `data.feishuSuccess` | âœ… æ–°å¢ |

## ğŸ¯ ä¿®å¤æ•ˆæœ

### 1. åŠŸèƒ½æ¢å¤
- âœ… ç½‘ç«™ä¿¡æ¯æå–åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… ç»“æœå±•ç¤ºåŠŸèƒ½æ­£å¸¸
- âœ… é£ä¹¦çŠ¶æ€æ˜¾ç¤ºåŠŸèƒ½æ­£å¸¸

### 2. ç”¨æˆ·ä½“éªŒ
- âœ… ä¸å†å‡ºç°æ•°æ®æ ¼å¼é”™è¯¯
- âœ… æå–ç»“æœæ­£ç¡®æ˜¾ç¤º
- âœ… é£ä¹¦å†™å…¥çŠ¶æ€æ¸…æ™°å¯è§

### 3. é”™è¯¯å¤„ç†
- âœ… ç½‘ç»œé”™è¯¯æ­£ç¡®å¤„ç†
- âœ… æ•°æ®æ ¼å¼é”™è¯¯å·²ä¿®å¤
- âœ… ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

## ğŸš€ æµ‹è¯•å»ºè®®

### 1. åŸºæœ¬åŠŸèƒ½æµ‹è¯•
```bash
# æµ‹è¯•æ­£å¸¸ç½‘ç«™
curl -X POST http://localhost:3000/api/extract \
  -H "Content-Type: application/json" \
  -d '{"url": "https://example.com"}'
```

### 2. é”™è¯¯å¤„ç†æµ‹è¯•
```bash
# æµ‹è¯•æ— æ•ˆURL
curl -X POST http://localhost:3000/api/extract \
  -H "Content-Type: application/json" \
  -d '{"url": "invalid-url"}'
```

### 3. å‰ç«¯ç•Œé¢æµ‹è¯•
1. è®¿é—® `http://localhost:3000`
2. è¾“å…¥æœ‰æ•ˆç½‘ç«™åœ°å€
3. ç‚¹å‡»æå–æŒ‰é’®
4. éªŒè¯ç»“æœæ­£ç¡®æ˜¾ç¤º
5. æ£€æŸ¥é£ä¹¦çŠ¶æ€æç¤º

## ğŸ‰ æ€»ç»“

é€šè¿‡ä¿®å¤æ•°æ®æ ¼å¼ä¸åŒ¹é…çš„é—®é¢˜ï¼Œç½‘é¡µç«¯ç°åœ¨å¯ä»¥ï¼š

âœ… **æ­£å¸¸æå–ç½‘ç«™ä¿¡æ¯** - ä¸å†å‡ºç°æ•°æ®æ ¼å¼é”™è¯¯  
âœ… **æ­£ç¡®æ˜¾ç¤ºç»“æœ** - æ‰€æœ‰å­—æ®µéƒ½èƒ½æ­£ç¡®å±•ç¤º  
âœ… **æ˜¾ç¤ºé£ä¹¦çŠ¶æ€** - ç”¨æˆ·çŸ¥é“æ•°æ®æ˜¯å¦å†™å…¥æˆåŠŸ  
âœ… **æä¾›è‰¯å¥½ä½“éªŒ** - æµç•…çš„æ“ä½œæµç¨‹  

**ä¿®å¤å®Œæˆï¼ç½‘é¡µç«¯ç°åœ¨å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼** ğŸ‰

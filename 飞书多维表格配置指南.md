# 飞书多维表格配置指南

## 📋 配置步骤

### 1. 创建飞书应用

1. 访问 [飞书开放平台](https://open.feishu.cn/)
2. 登录你的飞书账号
3. 点击"创建应用"
4. 填写应用信息：
   - 应用名称：网站信息提取器
   - 应用描述：自动提取网站信息并写入多维表格
   - 应用图标：上传一个图标

### 2. 配置应用权限

在应用详情页面，找到"权限管理"：

1. **添加权限**：
   - `bitable:app` - 多维表格应用权限
   - `bitable:app:readonly` - 多维表格应用只读权限
   - `bitable:table` - 多维表格权限
   - `bitable:table:readonly` - 多维表格只读权限

2. **申请权限**：
   - 点击"申请权限"
   - 填写申请理由：用于自动提取网站信息并写入多维表格

### 3. 获取应用凭证

在应用详情页面：

1. **应用ID (App ID)**：
   - 在"应用信息"页面可以看到
   - 格式类似：`cli_xxxxxxxxxxxxxxxx`

2. **应用密钥 (App Secret)**：
   - 在"凭证与基础信息"页面
   - 点击"重置"生成新的密钥
   - 格式类似：`xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`

### 4. 创建多维表格

1. 在飞书中创建一个新的多维表格
2. 记录表格的URL，格式类似：
   ```
   https://your-workspace.feishu.cn/base/bascnxxxxxxxxxxxxxxxx
   ```

### 5. 配置Netlify环境变量

在Netlify控制台：

1. 进入你的项目
2. 点击"Site settings" → "Environment variables"
3. 添加以下环境变量：

   ```
   FEISHU_APP_ID = cli_xxxxxxxxxxxxxxxx
   FEISHU_APP_SECRET = xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
   FEISHU_TABLE_ID = bascnxxxxxxxxxxxxxxxx
   ```

### 6. 测试配置

1. 访问你的网站配置页面
2. 填写飞书应用信息：
   - 应用ID：`cli_xxxxxxxxxxxxxxxx`
   - 应用密钥：`xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`
   - 多维表格链接：`https://your-workspace.feishu.cn/base/bascnxxxxxxxxxxxxxxxx`

3. 点击"保存配置"
4. 如果显示"配置验证成功"，说明配置正确

## 🔧 常见问题

### Q: 权限申请被拒绝怎么办？
A: 确保申请理由充分，说明应用的具体用途。可以重新申请或联系飞书客服。

### Q: 表格ID在哪里找？
A: 从多维表格的URL中提取，通常是 `base/` 后面的字符串。

### Q: 环境变量设置后不生效？
A: 需要重新部署网站。在Netlify控制台点击"Trigger deploy"。

### Q: 写入多维表格失败？
A: 检查：
1. 应用权限是否正确
2. 环境变量是否正确设置
3. 表格ID是否正确
4. 网络连接是否正常

## 📝 多维表格字段设置

确保你的多维表格包含以下字段：

| 字段名称 | 字段类型 | 说明 |
|---------|---------|------|
| 网站URL | 文本 | 提取的网站地址 |
| 公司名称 | 文本 | 公司名称 |
| 描述 | 文本 | 网站描述 |
| 地址 | 文本 | 公司地址 |
| 邮箱 | 文本 | 联系邮箱 |
| 电话 | 文本 | 联系电话 |
| Instagram | 文本 | Instagram链接 |
| Facebook | 文本 | Facebook链接 |
| 提取时间 | 日期时间 | 数据提取时间 |

## 🚀 使用流程

1. **配置完成**后，访问主页面
2. **输入要提取的网站URL**
3. **点击"提取信息"**
4. **查看提取结果**
5. **数据会自动写入飞书多维表格**

## 📞 技术支持

如果遇到问题，请检查：
1. 浏览器控制台的错误信息
2. Netlify部署日志
3. 飞书应用权限状态

---

**注意**：请妥善保管你的应用密钥，不要泄露给他人。
